---
layout: default
---
<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>




<link rel=File-List
href="module_param(name,%20type,%20perm)的理解_files/filelist.xml">
<title>module_param(name, type, perm)的理解</title>
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Print</w:View>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:UseWord2002TableStyleRules/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:DoNotOptimizeForBrowser/>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:4.5pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:18.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-font-kerning:0pt;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h2
	{mso-style-next:Normal;
	margin-top:11.25pt;
	margin-right:0cm;
	margin-bottom:11.25pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:12.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h4
	{mso-style-next:Normal;
	margin-top:12.75pt;
	margin-right:0cm;
	margin-bottom:12.75pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:10.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h5
	{mso-style-next:Normal;
	margin-top:12.75pt;
	margin-right:0cm;
	margin-bottom:12.75pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:5;
	font-size:8.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h6
	{mso-style-next:Normal;
	margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:18.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:6;
	font-size:8.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:24.0pt;
	margin-right:4.5pt;
	margin-bottom:6.0pt;
	margin-left:4.5pt;
	mso-pagination:widow-orphan;
	font-size:36.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	font-weight:bold;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{margin-top:18.0pt;
	margin-right:4.5pt;
	margin-bottom:4.0pt;
	margin-left:4.5pt;
	mso-pagination:widow-orphan;
	font-size:24.0pt;
	font-family:Georgia;
	mso-fareast-font-family:Georgia;
	mso-bidi-font-family:Georgia;
	color:#666666;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	font-style:italic;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=ZH-CN style='tab-interval:36.0pt'>

<div class=Section1>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><b>module_param(name,
type, perm)的理解</b></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><b><o:p>&nbsp;</o:p></b></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param(name,
type, perm)是一个宏，向当前模块传入参数,对源码分析如下<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>在include\linux\moduleparam.h中<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
module_param(name, type, perm)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>module_param_named(name,
name, type, perm)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
module_param_named(name, value, type, perm)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>param_check_##type(name,
&amp;(value));<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>module_param_call(name,
param_set_##type, param_get_##type, &amp;value, perm); \<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>__MODULE_PARM_TYPE(name,
#type)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
module_param_call(name, set, get, arg, perm)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>__module_param_call(MODULE_PARAM_PREFIX, name, set, get, arg, perm)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
__module_param_call(prefix, name, set, get, arg, perm)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/* Default value instead of
permissions? */<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>static int __param_perm_check_##name
__attribute__((unused)) =<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>BUILD_BUG_ON_ZERO((perm)
&lt; 0 || (perm) &gt; 0777 || ((perm) &amp; 2));<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>static char
__param_str_##name[] = prefix #name;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>static struct kernel_param
const __param_##name<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>__attribute_used__<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>\<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>__attribute__
((unused,__section__ (&quot;__param&quot;),aligned(sizeof(void *)))) \<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>= { __param_str_##name,
perm, set, get, arg }<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>__attibute__
是gcc的关键字，可参考<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>http</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>://</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>gcc</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>.</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>gnu</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>.</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>org</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>/</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>onlinedocs</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>/</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>gcc</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>-4.0.0/</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>gcc</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>/</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>Variable</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>-</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>Attributes</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>.</span></a><a
href="http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Variable-Attributes.html"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>html</span></a><u><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'><o:p></o:p></span></u></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>__attibute__将参数编译到__param段中，<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param是一步一步展开的,<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>上面几个宏在include\linux\moduleparam.h中的顺序刚好相反<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param宏的类似函数调用的顺序<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param-&gt;module_param_named-&gt;module_param_call-&gt;__module_param_call<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>展开的顺序正好相反<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>__module_param_call-&gt;module_param_call-&gt;module_param_named-&gt;module_param<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>type类型可以是byte,short,ushort,int,<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>uint,long,ulong,charp(注：字符指针),bool,invbool,
<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>perm表示此参数在sysfs文件系统中所对应的文件节点的属性。<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>权限在include/linux/stat.h中有定义<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>比如：<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IRWXU 00700<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IRUSR 00400<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IWUSR 00200<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IXUSR 00100<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IRWXG 00070<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IRGRP 00040<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IWGRP 00020<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IXGRP 00010<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IRWXO 00007<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IROTH 00004<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IWOTH 00002<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#define
S_IXOTH 00001<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>当perm为0时，表示此参数不存在
sysfs文件系统下对应的文件节点。<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>模块被加载后，在/sys/module/
目录下将出现以此模块名命名的目录。<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>测试一下，插入一个驱动模块mp.ko,<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>sudo
insmod mp.ko <o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>发现
/sys/module下出现mp这个文件夹<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>mp中有drivers/,sections/,parameters/,initstate,refcnt,srcversion<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>其中initstate
里面内容为：live<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>refcnt里面内容为：0<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>srcversion里面内容为：F9BDEBF706329B443C28E08,很长，应该是一个唯一数字<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>driver文件夹里面是空的<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>sections有__param,__versions<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>__param里面内容为0xd081e0a8<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>__versions里面内容为0xd081e100<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>parameters有count,info(注：自己定义的参数)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>count里面的内容为1(注：输出次数)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>info里面的内容为a
site about linux driver.(注：输出内容)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>如果此模块存在perm不为0的命令行参数，<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>在此模块的目录下将出现parameters目录，<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>包含一系列以参数名命名的文件节点，<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>这些文件的权限值等于perm，文件的内容为参数的值。<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>在/sys/module/mp/出现的参数，在module结构中的对应如下<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
module<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>enum module_state state;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/* Member of list of modules
*/<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>struct list_head list;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>......<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/* Sysfs stuff. */<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>struct module_kobject mkobj;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>struct module_param_attrs
*param_attrs;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>struct module_attribute
*modinfo_attrs;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>const char *version;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>const char *srcversion;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>struct kobject *drivers_dir;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/* Exported symbols */<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>const struct kernel_symbol
*syms;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>unsigned int num_syms;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>const unsigned long *crcs;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>......<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>/* Section attributes */<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>struct module_sect_attrs
*sect_attrs;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#endif<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>......<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>};<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>enum
module_state<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>MODULE_STATE_LIVE,<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>MODULE_STATE_COMING,<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>MODULE_STATE_GOING,<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>};<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>state对应/sys/module/mp/initstate<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>drivers_dir对应/sys/module/mp/driver文件夹<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>version对应/sys/module/mp/sections/__version<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>srcversion对应/sys/module/mp/srcversion<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>测试模块，源程序mp.c内容如下：<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#include
&lt;linux/module.h&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>#include
&lt;linux/moduleparam.h&gt;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>static
char *info= &quot;a site about linux driver.&quot;;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>static
int count= 1;<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>static
int mp= 0;<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param(mp,int,0);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param(count,int,S_IRUSR);<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_param(info,charp,S_IRUSR);<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>MODULE_AUTHOR(&quot;ioctrl&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>MODULE_LICENSE(&quot;Dual
BSD/GPL&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>static
int hello_init(void)<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>int i;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>for(i=0;i&lt;count;i++)<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>printk(KERN_NOTICE</span><a href="http://www.linuxdriver.cn/"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>www</span></a><a href="http://www.linuxdriver.cn/"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>.</span></a><a href="http://www.linuxdriver.cn/"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>linuxdriver</span></a><a href="http://www.linuxdriver.cn/"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>.</span></a><a href="http://www.linuxdriver.cn/"><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New";
color:#0000EE'>cn</span></a><span style='font-family:"Courier New";mso-fareast-font-family:
"Courier New"'> is &quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>printk(info);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>printk(&quot;\n&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>return 0;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;</span>}<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>static
void hello_exit(void) <o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>printk(KERN_NOTICE&quot;exit!\n&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>}<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_init(hello_init);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>module_exit(hello_exit);<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>编译<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>手工插入,插入时传递参数
count=10,info=&quot;驱动开发网站。&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>命令如下：<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>sudo
insmod mp.ko count=10 info=&quot;驱动开发网站。&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>然后用dmesg查看消息<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>看到如下，共10条记录<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>[16122.280000]</span><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>www</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>linuxdriver</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>.</span></a><a
href="http://www.linuxdriver.cn/"><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New";color:#0000EE'>cn</span></a><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'> is 驱动开发网站<o:p></o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>有不对的地方，望指正。<o:p></o:p></span></p>

</div>

</body>

</html>
