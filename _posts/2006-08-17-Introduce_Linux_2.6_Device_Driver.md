---
layout: default
date: 2006-08-17
title: ???? Linux 2.6 ???????
---

# {{ page.title }}

???? Linux 2.6 ???????
 
1.??
?????????????,????????????????,???????????????
???????,??????????:
a) ???? ??????????????????,???????,?:??USB?????,??????????????????????;
b) ??????? ?/sysfs?????????????
c) ?????
d) ??????
2.sysfs ??????
sysfs ??????????,???/proc?sysfs???/proc???????????????,???????????????????????
sysfs????????????????????????????????:


a) block
b) device
c) bus
d) drivers
e) class
f) power
g) firmware
????????kobject??,??????kobject????
3. Kobject?Kset ? subsystem
3.1 Kobject
Kobject ????????????????C++????,?????????????--?????--?????????????bus, devices, drivers ????????
????kobject??,????:
a) ??????????
b) ???????????
c) ????????????????


struct kobject{
char             * k_name;
char               name[20];
struct k_ref       kref;
struct list_head   entry;
struct kobject   * parent;
struct kset      * kset;
struct ktype     * ktype;
struct dentry    * dentry;
};
struct kobj_type{
void (*release) (struct kobject *);
struct sysfs_ops *sysfs_ops;
struct attribute **default_attrs;
};
3.2 Kset
??kset??????????kobject???


struct kset{
struct subsystem * subsys;
struct kobj_type   ktype;
struct list_head   list;
struct kobject     kobj;
struct kset_hotplug_ops * hotplug_ops;
};
3.3 Subsystem
????kset????subsystem. subsystem?????????kset, ???????


struct subsystem{
struct kset kset;
struct rw_semaphore rwsem;
};
4.?????????
4.1 device
4.2 drive
4.3 bus
4.4 class
