<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>




<link rel=File-List href="详细介绍%20Linux%202.6%20设备的驱动模型_files/filelist.xml">
<title>详细介绍 Linux 2</title>
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:UseWord2002TableStyleRules/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:DoNotOptimizeForBrowser/>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:4.5pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:18.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-font-kerning:0pt;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h2
	{mso-style-next:Normal;
	margin-top:11.25pt;
	margin-right:0cm;
	margin-bottom:11.25pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:12.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h4
	{mso-style-next:Normal;
	margin-top:12.75pt;
	margin-right:0cm;
	margin-bottom:12.75pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:10.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h5
	{mso-style-next:Normal;
	margin-top:12.75pt;
	margin-right:0cm;
	margin-bottom:12.75pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:5;
	font-size:8.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
h6
	{mso-style-next:Normal;
	margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:18.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:6;
	font-size:8.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:24.0pt;
	margin-right:4.5pt;
	margin-bottom:6.0pt;
	margin-left:4.5pt;
	mso-pagination:widow-orphan;
	font-size:36.0pt;
	font-family:Verdana;
	mso-fareast-font-family:Verdana;
	mso-bidi-font-family:"Times New Roman";
	color:black;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	font-weight:bold;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{margin-top:18.0pt;
	margin-right:4.5pt;
	margin-bottom:4.0pt;
	margin-left:4.5pt;
	mso-pagination:widow-orphan;
	font-size:24.0pt;
	font-family:Georgia;
	mso-fareast-font-family:Georgia;
	mso-bidi-font-family:Georgia;
	color:#666666;
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	font-style:italic;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=ZH-CN style='tab-interval:36.0pt'>

<div class=Section1>

<h2 style='margin:0cm;margin-bottom:.0001pt'><o:p>&nbsp;</o:p></h2>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
11.25pt;margin-left:0cm'>详细介绍 Linux 2.6 设备的驱动模型</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>　</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><b>1.背景<o:p></o:p></b></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>随着设备拓扑结构越来越复杂，需要为内核建立一个统一的设备模型，对系统结构做一般性的抽象描述。</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>有了该抽象结构，可支持多种不同的任务：</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>a) 电源管理 完成电源管理工作需要对系统结构的理解，且有严格的顺序，如：一个USB宿主适配器，在处理完所有与其相连接的设备面前是不能关闭的；</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>b) 与用户空间通信 由/sysfs虚拟文件系统展示设备的属性</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>c) 热插拔设备</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>d) 对象生命周期</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><b>2.sysfs 虚拟文件系统<o:p></o:p></b></p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>sysfs 是一个特殊的文件系统，类似于/proc。sysfs不仅象/proc一样允许用户空间访问内核的数据，而且它以更结构化的方式向用户提供内核数据信息。</p>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>sysfs的一个目的就是展示设备驱动模型中各组件的层次关系。其顶级目录包括：</p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><o:p>&nbsp;</o:p></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;margin-left:1.5pt;border-collapse:collapse;border:none;
 mso-border-alt:solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:
 0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;mso-border-insidev:
 .5pt solid windowtext'>
 <tr style='mso-yfti-lastrow:yes'>
  <td valign=top style='border:solid black 1.0pt;mso-border-alt:solid black .75pt;
  background:#E6E6E6;mso-shading:#E6E6E6;mso-pattern:solid #E6E6E6;padding:
  1.5pt 1.5pt 1.5pt 1.5pt'>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>a)
  block</span><span style='mso-bidi-font-family:Verdana'><o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>b)
  device<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>c)
  bus <o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>d)
  drivers <o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>e)
  class <o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>f)
  power <o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>g)
  firmware<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>每个目录代表一个kobject对象，每个文件代表kobject的属性。</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'><b>3. Kobject、Kset 和 subsystem<o:p></o:p></b></p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>3.1 Kobject</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>Kobject 是组成设备模型的基本结构。类似于C++中的基类，它嵌入于更大的对象的对象中--所谓的容器--用来描述设备模型的组件。如bus,
devices, drivers 都是典型的容器。</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>容器有了kobject之后，允许内核：</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>a) 保存对容器的引用计数</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>b) 保存容器之间的层次关系</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>c) 为每个容器的属性提供一个用户视图</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'><o:p>&nbsp;</o:p></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;margin-left:1.5pt;border-collapse:collapse;border:none;
 mso-border-alt:solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:
 0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;mso-border-insidev:
 .5pt solid windowtext'>
 <tr style='mso-yfti-lastrow:yes'>
  <td valign=top style='border:solid black 1.0pt;mso-border-alt:solid black .75pt;
  background:#E6E6E6;mso-shading:#E6E6E6;mso-pattern:solid #E6E6E6;padding:
  1.5pt 1.5pt 1.5pt 1.5pt'>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kobject{</span><span style='mso-bidi-font-family:Verdana'><o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>char<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span>* k_name;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>char<span
  style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span>name[20];<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  k_ref<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span>kref;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  list_head<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>entry;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kobject<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>* parent;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kset<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*
  kset;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  ktype<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>* ktype;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  dentry<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>* dentry;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>};<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kobj_type{<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>void
  (*release) (struct kobject *);<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  sysfs_ops *sysfs_ops;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  attribute **default_attrs;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>};<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>3.2 Kset</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>一个kset是嵌入相同类型结构的kobject集合。</p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><o:p>&nbsp;</o:p></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;margin-left:1.5pt;border-collapse:collapse;border:none;
 mso-border-alt:solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:
 0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;mso-border-insidev:
 .5pt solid windowtext'>
 <tr style='mso-yfti-lastrow:yes'>
  <td valign=top style='border:solid black 1.0pt;mso-border-alt:solid black .75pt;
  background:#E6E6E6;mso-shading:#E6E6E6;mso-pattern:solid #E6E6E6;padding:
  1.5pt 1.5pt 1.5pt 1.5pt'>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kset{</span><span style='mso-bidi-font-family:Verdana'><o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  subsystem * subsys;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kobj_type<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>ktype;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  list_head<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>list;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kobject<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>kobj;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kset_hotplug_ops * hotplug_ops;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>};<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>3.3 Subsystem</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>一系列的kset就组成了subsystem. subsystem可以包括不同类型的kset， 它只有两个成员</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'><o:p>&nbsp;</o:p></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><o:p>&nbsp;</o:p></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;margin-left:1.5pt;border-collapse:collapse;border:none;
 mso-border-alt:solid windowtext .5pt;mso-yfti-tbllook:1184;mso-padding-alt:
 0cm 5.4pt 0cm 5.4pt;mso-border-insideh:.5pt solid windowtext;mso-border-insidev:
 .5pt solid windowtext'>
 <tr style='mso-yfti-lastrow:yes'>
  <td valign=top style='border:solid black 1.0pt;mso-border-alt:solid black .75pt;
  background:#E6E6E6;mso-shading:#E6E6E6;mso-pattern:solid #E6E6E6;padding:
  1.5pt 1.5pt 1.5pt 1.5pt'>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  subsystem{</span><span style='mso-bidi-font-family:Verdana'><o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  kset kset;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>struct
  rw_semaphore rwsem;<o:p></o:p></span></p>
  <p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span
  style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'>};<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'><b>4.设备驱动模型的组件</b></p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>4.1 device</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>4.2 drive</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>4.3 bus</p>

<p class=MsoNormal align=center style='margin-bottom:.0001pt;
text-align:left; margin-left:0cm; margin-right:0cm; margin-top:0cm'>4.4 class</p>

</div>

</body>

</html>
